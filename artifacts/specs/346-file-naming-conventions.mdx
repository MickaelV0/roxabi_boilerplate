---
title: "Standardize File Naming Conventions"
description: Enforce PascalCase for component .tsx files and camelCase for everything else across the monorepo via Biome rule and script-assisted migration
---

## Context

Mixed file naming conventions across the monorepo cause inconsistency and developer confusion. Components use PascalCase in some places and kebab-case in others. Hooks, utilities, and API modules similarly lack a consistent pattern.

**Promoted from:** [Standardize File Naming Conventions](../analyses/346-file-naming-conventions.mdx)

Issue: [#346](https://github.com/MickaelV0/roxabi_boilerplate/issues/346)

## Goal

Establish and enforce a single file naming convention across the entire monorepo:

| File Type | Convention | Example |
|-----------|-----------|---------|
| Component `.tsx` (in `**/components/**`) | PascalCase | `BanDialog.tsx`, `ActionEmail.tsx` |
| Hooks, utils, lib, config `.ts` | camelCase | `useConsent.ts`, `formatDate.ts` |
| API modules `.ts` (with suffixes) | camelCase + preserved suffix | `adminUsers.service.ts`, `apiKey.controller.ts` |
| Route files | TanStack conventions (exempt) | `$postId.tsx`, `__root.tsx`, `index.tsx` |
| Integration wrappers `.tsx` (not in `components/`) | camelCase | `rootProvider.tsx`, `devtools.tsx` |
| Email templates `.tsx` (not in `components/`) | camelCase | `magicLink.tsx`, `resetPassword.tsx` |
| Test files | Match source convention + `.test` suffix | `BanDialog.test.tsx`, `errorUtils.test.ts` |
| Scripts `.ts` | camelCase | `dbSeed.ts`, `checkEnvSync.ts` |

Enforce via Biome `useFilenamingConvention` at `error` level with per-directory overrides.

## Users &amp; Use Cases

- **Developers** writing new files — Biome error immediately flags convention violations, no guesswork
- **Reviewers** checking PRs — consistent naming reduces cognitive load during review
- **CI pipeline** — automated enforcement prevents future drift
- **NestJS scaffold users** — `nest generate` outputs kebab-case by default; developers rename post-scaffold, then run `bun run lint` to verify. Biome error catches violations in CI.

## Expected Behavior

### Happy path

1. Developer creates a new component file in `components/` as `MyWidget.tsx` (PascalCase) — Biome passes
2. Developer creates a new utility in `lib/` as `parseToken.ts` (camelCase) — Biome passes
3. Developer creates a new NestJS service via `nest generate service payments` — outputs `payments.service.ts` — Biome passes (already camelCase)
4. Developer creates `api-key-rotation.service.ts` — Biome error flags kebab-case — developer renames to `apiKeyRotation.service.ts`
5. CI runs `bun run lint` — all files pass `useFilenamingConvention`

### Edge cases

| Case | Handling |
|------|----------|
| Multi-dot suffix files (`.service.ts`, `.controller.ts`, `.server.ts`) | Only base name is renamed. Biome parses `adminUsers.service.ts` as name=`adminUsers`, extension=`service.ts`. Both valid. |
| `__test-utils__` directories | Directory names are not checked by Biome. Files inside follow camelCase. |
| Files with acronyms (e.g., `apiURL.ts`) | `strictCase: true` (Biome default) forbids consecutive uppercase. Must use `apiUrl.ts`. |
| `routeTree.gen.ts` | Already excluded from Biome via `files.includes` glob. No change needed. |
| `.server.ts` TanStack Start files | Base name is renamed: `apiClient.server.ts`. Suffix preserved. |
| Barrel `index.ts` files | Already camelCase. No rename needed. Re-exports inside are updated. |
| Mock files in `test/__mocks__/` | Follow camelCase: `mockSession.ts`, `mockUser.ts`. |
| `@repo/*` package imports | Resolve to package boundaries, not individual files. Unaffected by internal renames. |
| `vi.mock()` dynamic imports | Script explicitly handles `vi.mock('@/path/old-name')` patterns (~20 occurrences for `repo-ui` mock alone). |
| `packages/email/src/components/action-email.tsx` | Matches `**/components/**/*.tsx` glob &rarr; PascalCase: `ActionEmail.tsx`. |
| `routes/-components/*.tsx` PascalCase files (e.g., `ThemeEditor.tsx`) | The `**/components/**` glob does NOT match `-components/` (leading hyphen breaks the match). These files depend on the `**/routes/**` exemption which correctly keeps them unaffected. |
| Localized email variants (`magic-link-fr.tsx`) | Rename to camelCase: `magicLinkFr.tsx`. Not in `components/`, so default camelCase applies. |

## Breadboard

### Code Affordances

| ID | Handler | Wiring | Logic |
|----|---------|--------|-------|
| N1 | `scripts/rename-files.ts` | N1 &rarr; N2, N3 | Bun script: reads rename map, executes `git mv`, updates imports across 6 categories |
| N2 | `git mv` (per file) | N1 &rarr; N2 | Renames file on disk + stages for git. Preserves blame history. |
| N3 | `sed` import replacement | N1 &rarr; N3 | Updates import paths: relative, `@/` alias, re-exports, test imports, `vi.mock()`, barrels. Patterns are right-anchored on closing quote delimiter. Longer names processed before prefix-sharing shorter names. |
| N4 | Post-rename verification | N3 &rarr; N4 | `grep -rn 'old-kebab-name'` for each renamed file. Fails if any references remain. |
| N5 | Biome config update | — | Add `useFilenamingConvention` rule to `biome.json` with overrides |
| N6 | Documentation updates | — | Update `dev-process.mdx`, `frontend-patterns.mdx`, `backend-patterns.mdx` |

### Data Stores

| ID | Store | Type | Accessed by |
|----|-------|------|-------------|
| S1 | Rename map (hardcoded in script) | Transient (script input) | N1 |
| S2 | `biome.json` | Persistent (config) | N5 |
| S3 | Documentation `.mdx` files | Persistent (docs) | N6 |

## Slices

| Slice | Description | Affordances | Demo |
|-------|-------------|-------------|------|
| V1 | Script + renames + import updates | N1, N2, N3, N4, S1 | All ~218 files renamed, all imports updated, grep verification passes with zero remaining kebab references |
| V2 | Biome rule enforcement | N5, S2 | `bun run lint` passes with `useFilenamingConvention` at error level. Creating a kebab-case file triggers Biome error. |
| V3 | Documentation | N6, S3 | `dev-process.mdx` has file naming table, `frontend-patterns.mdx` references component naming, `backend-patterns.mdx` documents API naming + NestJS CLI post-scaffold note |

## Constraints

- **Single PR:** All changes in one atomic PR (script-assisted). No intermediate states.
- **Git history:** `git mv` preserves blame. No `mv` + `git add`.
- **Biome version:** Rule available since Biome 1.5.0. Current project uses 2.4.4 — compatible.
- **TurboRepo cache:** File renames produce new hash fingerprints. TurboRepo correctly invalidates caches. No hardcoded filenames in `turbo.jsonc`.
- **`strictCase: true`:** Biome default. Consecutive uppercase forbidden. Document as constraint for future files.
- **NestJS CLI:** `nest generate` outputs kebab-case by default. Post-scaffold rename required. Biome error catches violations in CI.
- **Merge window:** Large rename PR has high conflict risk. Merge promptly after review to minimize window.

## Non-goals

- Renaming directory names (Biome does not check directories)
- Changing `@repo/*` package aliases or cross-package import structure
- Modifying route file naming (TanStack conventions are framework-required)
- Adding `useNamingConvention` for variable/function names (separate concern)
- Changing the existing Biome formatter or other linter rules
- Backwards-compatibility aliases for old kebab-case import paths

## Technical Decisions

1. **Script-assisted atomic migration** over manual renames or phased rollout. Reproducible, auditable, handles rebase scenarios.
2. **`sed`-based import replacement** over AST-based. String replacement is reliable for import paths at this scale. All patterns include the closing quote as right-anchor to prevent substring collisions (e.g., `api-error` vs `api-error-utils`). Longer names are processed before prefix-sharing shorter counterparts.
3. **Script committed to repo** at `scripts/rename-files.ts` for audit trail and rebase reproducibility.
4. **Integration `.tsx` wrappers stay camelCase** — `root-provider.tsx` &rarr; `rootProvider.tsx`. Not in `components/`, so PascalCase glob doesn't apply. This creates a deliberate split: `.tsx` files in `**/components/**` use PascalCase, all other `.tsx` files (integrations, email templates) use camelCase. The distinction is intentional — only files in component directories are UI components.
5. **Biome `strictCase: true` (default)** — accepted constraint. No current violations. Future files with acronyms use `apiUrl.ts` not `apiURL.ts`.
6. **Scripts included in rename scope** — `apps/api/scripts/` (9 files), root `scripts/` (3 files) are renamed to camelCase. No exemption override needed.

## Full Audit Inventory

| Workspace | Source Files | Test Files | Total |
|-----------|-------------|------------|-------|
| `apps/web/src/components/` | 14 .tsx | 1 .test.tsx | 15 |
| `apps/web/src/lib/` | 13 .ts | 11 .test.ts | 24 |
| `apps/web/src/hooks/` | 1 .ts | 1 .test.tsx | 2 |
| `apps/web/src/test/` (mocks) | 5 | — | 5 |
| `apps/web/src/integrations/` | 2 .tsx | 2 .test.tsx | 4 |
| `apps/web/src/` (misc) | 1 (`mdx-components.tsx`) | — | 1 |
| `apps/api/src/` | 95 .ts | 47 .test.ts | 142 |
| `apps/api/scripts/` | 8 .ts | 1 .test.ts | 9 |
| `packages/ui/src/themes/` | 6 .ts | — | 6 |
| `packages/email/` | 8 .tsx | 2 .test.ts | 10 |
| Root `scripts/` | 3 .ts | — | 3 |
| **Total** | **156** | **65** | **~221** |

## Biome Configuration

Append the following overrides to the existing `biome.json` override array (after the current `apps/api` and test/scripts overrides). The new overrides must come after existing ones:

```json
{
  "linter": {
    "rules": {
      "style": {
        "useFilenamingConvention": {
          "level": "error",
          "options": { "filenameCases": ["camelCase"] }
        }
      }
    }
  },
  "overrides": [
    {
      "includes": ["**/components/**/*.tsx"],
      "linter": {
        "rules": {
          "style": {
            "useFilenamingConvention": {
              "level": "error",
              "options": { "filenameCases": ["PascalCase"] }
            }
          }
        }
      }
    },
    {
      "includes": ["**/routes/**"],
      "linter": {
        "rules": {
          "style": { "useFilenamingConvention": "off" }
        }
      }
    }
  ]
}
```

**Override ordering in final `biome.json`:**

1. `apps/api/**` — `useImportType: off` (existing)
2. Test + scripts files — complexity relaxed (existing)
3. `**/components/**/*.tsx` — `useFilenamingConvention: PascalCase` (new)
4. `**/routes/**` — `useFilenamingConvention: off` (new)

The `**/routes/**` override (position 4) takes precedence over `**/components/**` (position 3) for files inside `routes/-components/`. This is correct — `routes/-components/*.tsx` PascalCase files (e.g., `ThemeEditor.tsx`) depend on the routes exemption because the `**/components/**` glob does NOT match `-components/` (the leading hyphen breaks the glob match).

## Rename Script Design

`scripts/rename-files.ts` — Bun script with the following logic:

1. **Rename map:** Hardcoded array of `{ old: string, new: string, dir: string }` entries for all ~221 files, ordered so that longer names appear before prefix-sharing shorter names (e.g., `api-error-utils` before `api-error`).
2. **Phase 1 — git mv:** For each entry, run `git mv old new`.
3. **Phase 2 — import updates:** For each rename, run `sed` across `apps/` and `packages/` with patterns for:
   - Relative imports: `'./old-name'` &rarr; `'./newName'` (and `../`, `../../`)
   - `@/` alias imports: `'@/lib/old-name'` &rarr; `'@/lib/newName'`
   - `vi.mock()` calls: `vi.mock('@/test/__mocks__/old-name')` &rarr; `vi.mock('@/test/__mocks__/newName')`
   - `await import()` calls: same pattern as `vi.mock()`
   - Barrel re-exports: `export * from './old-name'` &rarr; `export * from './newName'`
   - All patterns include the **closing quote delimiter** as right-anchor to prevent substring collisions.
4. **Phase 3 — verification:** For each renamed file, `grep -rn 'old-kebab-name'` across `apps/` and `packages/`. Fail if any reference remains.
5. **Output:** Summary of renames performed, imports updated, and verification results.

## Pre-Execution Validation

Before submitting the PR, run the following on the feature branch:

1. Execute rename script on worktree branch
2. Verify all renames succeeded: `git diff --name-status HEAD | grep ^R | wc -l` should match ~221
3. Spot-check 5 files from each workspace:
   - `apps/web` component: verify relative + `@/` imports
   - `apps/api` service: verify import paths + barrel re-exports
   - `packages/ui`: verify cross-module imports
   - `packages/email`: verify template imports
4. Run full test suite: `bun run test`
5. Run full lint: `bun run lint`
6. Run typecheck: `bun run typecheck`

## Success Criteria

- [ ] Zero Biome `useFilenamingConvention` errors on `bun run lint`
- [ ] Zero remaining kebab-case references to renamed files (`grep` verification)
- [ ] All existing tests pass (`bun run test`)
- [ ] Typecheck passes (`bun run typecheck`)
- [ ] All `vi.mock()` and `await import()` calls reference correctly renamed files
- [ ] `dev-process.mdx` "Naming Conventions" section includes file naming table
- [ ] `frontend-patterns.mdx` references component file naming convention
- [ ] `backend-patterns.mdx` references API file naming convention + NestJS CLI post-scaffold note
- [ ] `scripts/rename-files.ts` committed to repo
- [ ] Creating a new kebab-case file in `components/` or `lib/` triggers Biome error

## Open Questions

None — all ambiguities resolved during analysis and interview phases.
