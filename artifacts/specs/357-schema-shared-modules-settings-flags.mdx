---
title: "Schema + Shared Modules for System Settings & Feature Flags"
parent_spec: "artifacts/specs/270-admin-phase3-system-settings-feature-flags.mdx"
parent_issue: 270
---

## Scope

Slice V1: DB tables, migrations, seed data, shared modules, shared types.

- `system_settings` and `feature_flags` tables (Global, no RLS, no tenant_id)
- DDL migration (generated by `db:generate`) + hand-written companion seed migration
- `SystemSettingsModule` with `SystemSettingsService` (`getValue<T>`, `getAll`, `getByCategory`)
- `FeatureFlagsModule` with `FeatureFlagService` (`isEnabled`, `getAll`, `create`, `update`, `delete` + in-memory cache)
- Shared types in `packages/types/src/admin.ts`
- Register both modules as top-level `AppModule` imports

## Success Criteria

- [ ] `db:migrate` creates both tables and seeds 12 settings in all environments (dev, preview, production)
- [ ] Both tables are Global (no RLS). Migration does not create tenant RLS policies
- [ ] `FeatureFlagService.isEnabled('nonexistent')` returns `false`
- [ ] `FeatureFlagService` cache: second call within 60s returns cached value (no DB query). After write, next call reads from DB
- [ ] `SystemSettingsService.getValue&lt;string&gt;('app.name')` returns `"Roxabi"` (seeded default). Non-existent key returns `null`
- [ ] Shared types exported from `packages/types`

## Reference

Full spec: [artifacts/specs/270-admin-phase3-system-settings-feature-flags.mdx](./270-admin-phase3-system-settings-feature-flags.mdx)
