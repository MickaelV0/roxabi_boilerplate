---
title: "AI Workflow Improvement Strategy"
description: Execution spec for making the AI workflow smarter — 7 phase-based issues under #251 with extracted patterns from TaskMaster.dev, obra/superpowers, rjs/shaping-skills, SpecForge, and spec-kit.
---

## Context

The Roxabi boilerplate has 9 agents, 15 skills, and a multi-stage pipeline (bootstrap → scaffold → review → promote). Four pain points have emerged: token waste, poor agent coordination, a planning pipeline that doesn't break down large issues, and a flat skill architecture that struggles at scale.

During bootstrap, we evaluated five external tools and extracted 16 concrete patterns:
- **obra/superpowers**: Discipline system with rationalizations tables, micro-tasks, evidence-based verification
- **rjs/shaping-skills**: Shape Up methodology — multi-shape exploration, fit check, breadboarding, vertical slicing, spikes
- **TaskMaster.dev**: Complexity scoring, dynamic subtask expansion, tag-based task isolation, MCP integration
- **Censseo/SpecForge**: Ambiguity taxonomy, semantic anchors, `[NEEDS CLARIFICATION]` markers, requirement-quality checklists
- **github/spec-kit**: Cross-artifact consistency checks, committed plan artifacts, `[P]` parallelization markers

The original 8 idea-level issues were reorganized twice. This spec reflects the final structure: 7 implementation-ready issues with investigation details baked in.

### Pattern Selection Summary

Of 25 patterns evaluated across 5 tools, 16 were incorporated:

| # | Pattern | Source | Decision | Phase |
|---|---------|--------|----------|-------|
| 1 | Multi-shape exploration (2-3 approaches) | shaping-skills | **Incorporated** | #281 |
| 2 | Fit check matrix (binary ✅/❌) | shaping-skills | **Incorporated** | #281 |
| 3 | Breadboard tables (UI→Code→Data) | shaping-skills | **Incorporated** | #281 |
| 4 | Spike documents (time-boxed investigations) | shaping-skills | **Incorporated** | #281 |
| 5 | Vertical slicing (demo-able increments) | shaping-skills | **Incorporated** | #281 |
| 6 | `[NEEDS CLARIFICATION]` markers | SpecForge/spec-kit | **Incorporated** | #281 |
| 7 | Nine-category ambiguity taxonomy | SpecForge | **Incorporated** | #281 |
| 8 | Requirement-quality checklists | spec-kit | **Incorporated** | #281 |
| 9 | 2-5 min micro-tasks with verification | superpowers | **Incorporated** | #282 |
| 10 | Dynamic subtask expansion | TaskMaster | **Incorporated** | #282 |
| 11 | `[P]` parallelization markers | SpecForge/spec-kit | **Incorporated** | #282 |
| 12 | Cross-artifact consistency check | spec-kit | **Incorporated** | #282 |
| 13 | Committed plan artifacts | spec-kit | **Incorporated** | #282 |
| 14 | Complexity scoring (1-10) | TaskMaster | **Incorporated** | #280 |
| 15 | Tag-based task isolation | TaskMaster | **Incorporated** | #283 |
| 16 | Semantic anchors in skill headers | SpecForge | **Incorporated** | #284 |
| — | Rationalizations tables | superpowers | Skipped | — |
| — | Session-start hook | superpowers | Skipped | — |
| — | "Might this skill apply?" gate | superpowers | Skipped | — |
| — | Two-stage code review | superpowers | Skipped | — |
| — | Evidence-based verification | superpowers | Skipped | — |
| — | Fresh subagent per task | superpowers | Skipped | — |
| — | Ripple check hook | shaping-skills | Skipped | — |
| — | PRD parsing | TaskMaster | Skipped | — |
| — | MCP server integration | TaskMaster | Skipped | — |
| — | Architecture registry | SpecForge | Skipped | — |
| — | Constitution governance | SpecForge/spec-kit | Skipped | — |
| — | `taskstoissues` command | SpecForge/spec-kit | Skipped | — |
| — | `research.md` per feature | spec-kit | Skipped | — |

### Enhanced Pipeline Workflow

```
┌─────────────────────────────────────────────────────────────────────┐
│                        /bootstrap --issue N                         │
│                                                                     │
│  ┌───────────────────────────────────────────────┐                  │
│  │ GATE 1: Analysis                              │                  │
│  │                                               │                  │
│  │  Interview (4 phases)                         │                  │
│  │    └─ Phase 3 uses 9-category ambiguity       │  ← NEW #281     │
│  │       taxonomy with Impact×Uncertainty rank   │                  │
│  │                                               │                  │
│  │  Analysis template:                           │                  │
│  │    + ## Shapes (2-3 approaches)               │  ← NEW #281     │
│  │    + ## Fit Check (binary matrix)             │  ← NEW #281     │
│  │                                               │                  │
│  │  Expert review → User approval                │                  │
│  └───────────────┬───────────────────────────────┘                  │
│                  ▼                                                   │
│  ┌───────────────────────────────────────────────┐                  │
│  │ GATE 1.5: Investigation (optional)            │                  │
│  │                                               │                  │
│  │  Triggers from:                               │                  │
│  │    - Analysis uncertainty (existing)           │                  │
│  │    - Breadboard unknowns                      │  ← NEW #281     │
│  │                                               │                  │
│  │  Output: spike findings → appended to analysis │                  │
│  └───────────────┬───────────────────────────────┘                  │
│                  ▼                                                   │
│  ┌───────────────────────────────────────────────┐                  │
│  │ GATE 2: Spec                                  │                  │
│  │                                               │                  │
│  │  Spec template:                               │                  │
│  │    + ## Breadboard (UI→Code→Data tables)      │  ← NEW #281     │
│  │    + ## Slices (demo-able increments)          │  ← NEW #281     │
│  │    + [NEEDS CLARIFICATION] inline markers     │  ← NEW #281     │
│  │                                               │                  │
│  │  Pre-check: requirement-quality checklist     │  ← NEW #281     │
│  │  Expert review → User approval                │                  │
│  └───────────────┬───────────────────────────────┘                  │
│                  ▼                                                   │
│  ┌───────────────────────────────────────────────┐                  │
│  │ GATE 2.5: Smart Splitting (optional)          │  ← NEW #285     │
│  │                                               │                  │
│  │  If >5 criteria or >3 slices:                 │                  │
│  │    → Propose sub-issues (approve/adjust/skip) │                  │
│  │    → Create GitHub sub-issues with deps       │                  │
│  └───────────────┬───────────────────────────────┘                  │
│                  ▼                                                   │
│         Bootstrap complete                                          │
└─────────────────────────────────────────────────────────────────────┘
                   │
                   ▼
┌─────────────────────────────────────────────────────────────────────┐
│                      /scaffold --spec N                             │
│                                                                     │
│  Step 1: Locate spec                                                │
│  Step 2: Plan (approve via AskUserQuestion)                         │
│  Step 3: Setup worktree + DB branch                                 │
│  Step 4: Scaffold stubs                                             │
│                                                                     │
│  ┌───────────────────────────────────────────────┐                  │
│  │ NEW STEP: Micro-task Generation               │  ← NEW #282     │
│  │                                               │                  │
│  │  1. Parse breadboard + slices (or criteria)   │                  │
│  │  2. Calculate complexity (1-10 rubric)        │  ← NEW #280     │
│  │  3. Expand into micro-tasks:                  │                  │
│  │     file path, snippet, verify cmd, time      │                  │
│  │  4. Mark [P] parallel-safe tasks              │  ← NEW #282     │
│  │  5. Run consistency check (spec ↔ tasks)      │  ← NEW #282     │
│  │  6. Commit plan to artifacts/plans/{issue}-{slug}.mdx   │  ← NEW #282     │
│  │  7. TaskCreate with metadata                  │                  │
│  └───────────────┬───────────────────────────────┘                  │
│                  ▼                                                   │
│  Pre-flight: block if [NEEDS CLARIFICATION] remains │ ← NEW #281   │
│                                                                     │
│  Step 5: Spawn agents                                               │
│    └─ Shared task list per worktree              │  ← NEW #283     │
│       CLAUDE_CODE_TASK_LIST_ID={issue}-{slug}    │                  │
│  Step 6: PR                                                         │
│  Step 7: Summary                                                    │
└─────────────────────────────────────────────────────────────────────┘
                   │
                   ▼
┌──────────────────┐     ┌──────────────────┐
│  /review         │ ──► │  /promote        │
│  (unchanged)     │     │  (unchanged)     │
└──────────────────┘     └──────────────────┘
```

**Promoted from:** [AI Workflow Improvement Strategy (Analysis)](../analyses/251-ai-workflow-improvement-strategy)

**Issue mapping:**

| v1 (ideas) | v2 (first restructure) | v3 (current) | Change |
|------------|----------------------|-------------|--------|
| #255 (tokens) | #272 | #280 | Added complexity scoring |
| #252+#265+#266 (research) | #273 | — | Research done; patterns in #281, #282 |
| #264 (skill graphs) | #274 | #284 | Light adoption (ADR → metadata + doc) |
| #263 (shared tasks) | #275 | #283 | Added tag isolation |
| — (synthesis) | #276 | — | Synthesis done during bootstrap |
| #253 (smart split) | #277 | #285 | Concrete design from patterns |
| #254 (Sonnet) | #278 | #286 | Moved to Phase 7 |
| — | — | #281 | New: bootstrap enrichment (from research) |
| — | — | #282 | New: scaffold micro-tasks (from research) |

## Goal

Deliver a smarter AI workflow that:
- Produces richer specs (shapes, fit check, breadboard, slices) before scaffold
- Generates micro-tasks with verification commands during scaffold planning
- Coordinates subagents via shared persistent task lists
- Breaks down large issues automatically before execution
- Reduces token waste through data-driven model assignment

## Users & Use Cases

**Primary user:** Solo developer (project owner) who orchestrates the AI team.

| Use Case | Current Pain | Target State |
|----------|-------------|--------------|
| Writing a spec | Single approach, prose-based | 2-3 shapes with fit check matrix, breadboard tables, vertical slices |
| Planning scaffold execution | Text-based tasks, arbitrary count | 2-5 min micro-tasks with verification commands, complexity-scaled |
| Running multi-agent scaffold | Isolated agents, no shared state | Shared task list per worktree, auto-unblocking dependencies |
| Breaking down a large feature | Manual decomposition after spec | Bootstrap proposes sub-issues from breadboard/slices |
| Finding the right skill | 15 flat SKILL.md files | Skills have next-skill metadata + workflow guide |

## Expected Behavior

### Happy path

**Phase 1 — Foundation (#280, S)**

1. Developer runs `/bootstrap --issue 280`
2. Token consumption data gathered + baseline metrics captured (session count per feature, interventions per scaffold)
3. Complexity scoring rubric designed: 1-10 scale mapping to S/F-lite/F-full tiers
4. Output: `artifacts/analyses/280-token-consumption.mdx` + rubric added to bootstrap/triage

**Phase 2 — Bootstrap Enrichment (#281, F-full)**

1. Developer runs `/bootstrap --issue 281` → full bootstrap pass
2. Spec defines exactly how 8 patterns integrate into bootstrap templates:
   - **Analysis template** gets: `## Shapes` (2-3 approaches) + `## Fit Check` (binary matrix)
   - **Spec template** gets: `## Breadboard` (UI→Code→Data tables) + `## Slices` (demo-able increments) + `[NEEDS CLARIFICATION]` marker syntax for inline ambiguity
   - **Gate 1.5** enhanced: spike triggers from breadboard unknowns (not just analysis uncertainty)
   - **Interview depth phase** enhanced: nine-category ambiguity taxonomy (Functional Scope, Domain & Data Model, UX, Non-Functional, Integrations, Edge Cases, Constraints, Terminology, Completion Signals) with `Impact × Uncertainty` ranking
   - **Gate 2 pre-check** enhanced: requirement-quality checklist ("unit tests for English") validates spec completeness before expert review
   - **Scaffold pre-flight** enhanced: guard that blocks scaffold if unresolved `[NEEDS CLARIFICATION]` markers remain
3. `/scaffold --spec 281` implements the template changes
4. Tested on 1 real feature bootstrap to validate

**Phase 3 — Scaffold Improvement (#282, F-full, depends on #281)**

1. Developer runs `/bootstrap --issue 282` → full bootstrap pass
2. Spec defines new micro-task step in scaffold (between stubs and implement):
   - Parse spec acceptance criteria + breadboard + slices
   - Calculate complexity score (Phase 1 rubric)
   - Expand into micro-tasks: file path, code snippet, verification command, expected output, estimated time
   - Mark each task with `[P]` parallelization flag if safe to run concurrently (no file conflicts, no shared dependencies)
   - Create via TaskCreate with metadata (including `parallel: true/false`)
   - Run cross-artifact consistency check: verify all spec success criteria have corresponding tasks and no tasks exist without spec backing
   - Commit plan to `artifacts/plans/{issue}-{slug}.mdx` before agent spawning
   - Present to user, spawn agents with task list on approval
3. `/scaffold --spec 282` implements the new step
4. Tested on 1 real feature scaffold

**Phase 4 — Agent Coordination (#283, F-full, parallel with Phase 2)**

1. Developer runs `/bootstrap --issue 283` → full bootstrap pass
2. Spec defines shared task list integration:
   - `CLAUDE_CODE_TASK_LIST_ID={issue}-{slug}` per worktree
   - Agent frontmatter updates: `memory: project`, `maxTurns: 50`, `permissionMode`
   - Scaffold changes: TeamCreate with shared task list, TaskCreate for plan tasks, TeamDelete for cleanup
   - AGENTS.md updates: task lifecycle rules, claim/complete protocol
3. `/scaffold --spec 283` implements changes
4. Validated with real multi-agent scaffold session

**Phase 5 — Skill Architecture (#284, F-lite, parallel with Phase 3)**

1. Developer runs `/bootstrap --issue 284`
2. Adds `next-skills` frontmatter to 7 orchestration skills (bootstrap, scaffold, review, promote, 1b1, interview, issue-triage)
3. Adds semantic anchors to skill headers — recognized methodology terms (e.g., `Semantic Anchors: [Shape Up, INVEST, BDD]`) that activate LLM contextual understanding
4. Creates `docs/guides/skill-workflows.mdx` with visual workflow graph
5. Updates 5 text handoffs to be more explicit

**Phase 6 — Smart Splitting (#285, F-full, depends on #281 + #283)**

1. Developer runs `/bootstrap --issue 285` → full bootstrap pass
2. Spec defines new Gate 2.5 in bootstrap:
   - After spec approval, analyze: criteria count, breadboard complexity, slice count
   - If &gt;5 criteria or &gt;3 slices → suggest splitting
   - Propose sub-issues via AskUserQuestion (approve/adjust/skip)
   - Create GitHub sub-issues with parent link, labels, dependencies
   - Skip option: proceed normally (single spec → single scaffold)
3. `/scaffold --spec 285` implements the gate
4. Scaffold handoff unchanged: each sub-issue gets its own `/scaffold --spec N`

**Phase 7 — Optimization (#286, S, after pipeline stable)**

1. Developer runs `/bootstrap --issue 286`
2. A/B test Sonnet vs Opus on 2-3 real tasks per candidate agent
3. PR updates frontmatter with `model: sonnet` for routine agents (fixer, doc-writer, tester, devops)
4. Keep Opus for judgment-heavy agents (architect, product-lead, security-auditor)

### Edge cases

| Scenario | Handling |
|----------|---------|
| Phase 1 takes longer than 1 session | Don't block Phase 2; use conservative complexity estimates |
| Bootstrap enrichment (#281) changes break existing specs | Existing specs are not retroactively updated; new sections are optional |
| Scaffold micro-tasks are too granular for simple features | Tier S bypasses micro-task step entirely (existing direct implementation) |
| Shared task lists (#283) API changes | Fallback: enhanced TeamCreate + SendMessage with explicit syncing |
| Two parallel worktrees conflict on staging | Serialize commits, not work. Resolve conflicts manually. |
| User rejects smart split proposal (#285) | Bootstrap continues normally — single spec, single scaffold |
| Sonnet degrades agent quality (#286) | Rollback: revert frontmatter. Monitor 3-5 sessions per agent. |
| Spec has no breadboard/slices (pre-Phase 2) | Smart splitting (#285) falls back to criteria count only |
| Phase 1 finds no meaningful token hotspots | Phase 7 A/B test proceeds with equal-weight comparison (no baseline bias). Complexity rubric still delivers value independently. |
| Spec has both breadboard/slices AND acceptance criteria | Breadboard/slices take priority for micro-task generation; acceptance criteria used for verification commands only |
| Scaffold session interrupted with active task list | Task list persists at `~/.claude/tasks/{id}/`. Next session resumes from task list state. Stale lists cleaned up manually or by `/cleanup`. |
| Phase 2 template changes produce worse specs | Rollback: revert template additions (sections are additive, removal is safe). Run 1 bootstrap without new sections to confirm regression is fixed. |
| Phase 4 lands before Phase 2 (parallel execution) | Safe: Phase 4 changes agent infra (frontmatter, AGENTS.md), Phase 2 changes templates. No overlap. Scaffold works with either set of changes independently. |
| Spec has unresolved `[NEEDS CLARIFICATION]` markers at Gate 2 | Expert reviewers flag unresolved markers. User must resolve or convert to Open Questions before scaffold. Scaffold pre-flight blocks on remaining markers. |
| Cross-artifact check finds gaps (spec criterion with no task) | Gap report shown to user before agent spawning. User can add missing tasks, adjust spec, or acknowledge as intentional omission. |
| `artifacts/plans/` directory doesn't exist yet | Scaffold creates `artifacts/plans/` on first use. Plan file committed to worktree branch, included in PR. |

## Constraints

- **Solo reviewer:** Phase 2 and Phase 4 can run in parallel (one produces spec changes, the other infra changes — minimal review overlap)
- **Pipeline stability:** Current pipeline remains functional throughout. New template sections are additive (optional until adopted).
- **Execution model:** Manual per-issue. Developer kicks off each phase.
- **No scaffold changes beyond Phase 3 and Phase 4.** Review and promote are not touched.

**Dependencies enforced:**
- #282 blocked by #281
- #285 blocked by #281 (design-time: needs breadboard/slices to analyze) + #283 (runtime: split sub-issues need shared task lists for coordinated execution — #285 spec can start before #283 ships)
- #286 blocked by #280 + #285

## Non-goals

- **No review/promote changes.** These skills are not touched.
- **No forced skill chaining.** Phase 5 adds metadata only — no auto-invocation.
- **No new agents.** Existing 9 agents are sufficient.
- **No Telegram bot improvements.** Claude Code workflow only.
- **No automated orchestration.** Manual execution per issue.
- **No external tool adoption.** Patterns extracted; tools not installed (TaskMaster MCP server evaluated but skipped).

## Technical Decisions

### Bootstrap templates: additive sections

**Decision:** New sections (Shapes, Fit Check, Breadboard, Slices) are added to analysis/spec templates as optional sections. Existing specs without these sections remain valid.

**Rationale:** Backward compatibility. Bootstrap can produce specs with or without shaping patterns depending on feature complexity.

### Scaffold micro-tasks: insertion point

**Decision:** New step between scaffold stubs and implement (currently 4e→5, exact step number determined by #282 spec). Micro-tasks are created via TaskCreate with `metadata: {complexity, verificationCommand, estimatedMinutes}` where `complexity` uses the 1-10 rubric from #280 (1-3=S, 4-6=F-lite, 7-10=F-full).

**Rationale:** Stubs provide the skeleton; micro-tasks provide the execution plan. Separating them keeps the scaffold flow linear.

**Integration detail:** Step 4f parses the spec's Breadboard and Slices sections (if present) to generate tasks aligned with the vertical slice structure. If no breadboard/slices exist (pre-Phase 2 specs), falls back to acceptance criteria parsing (current behavior, enhanced with micro-task format).

### Shared task lists: per-worktree isolation

**Decision:** `CLAUDE_CODE_TASK_LIST_ID={issue_number}-{slug}` per worktree. Each feature gets its own task list at `~/.claude/tasks/{id}/`.

**Rationale:** Prevents task contamination between parallel features. Tag format matches existing worktree naming convention.

### Skill graphs: light adoption

**Decision:** Add optional `next-skills` frontmatter to 7 orchestration skills + create workflow guide doc. No execution model changes, no forced chaining.

**Rationale:** Investigation found no evidence of agents currently failing to find skills. Light metadata + documentation provides the 80/20 solution without framework changes.

### Smart splitting: optional gate

**Decision:** Splitting is proposed, not forced. User can skip (no split) at Gate 2.5. If skipped, bootstrap proceeds as before.

**Rationale:** Not every spec needs decomposition. Simple features (Tier S) should never be split. The gate activates only for complex specs (&gt;5 criteria or &gt;3 slices). Thresholds are initial estimates based on existing spec review (most S/F-lite specs have 3-5 criteria and 1-2 slices) — to be calibrated after first 3 bootstrap runs with the new templates.

### Ambiguity markers: inline `[NEEDS CLARIFICATION]`

**Decision:** Specs can contain inline `[NEEDS CLARIFICATION: description]` markers where ambiguity exists. Max 3-5 per spec. Scaffold pre-flight blocks if unresolved markers remain.

**Rationale:** The current "Open Questions" section is a passive list at the bottom of specs. Inline markers are machine-scannable and positioned where the ambiguity actually lives, making them more actionable.

### Committed plan artifacts

**Decision:** Scaffold writes its plan to `artifacts/plans/{issue}-{slug}.mdx` before spawning agents. This is a durable artifact, not an ephemeral conversation-only approval.

**Rationale:** If a scaffold session is interrupted, the plan is lost in the current flow. A committed plan enables session resumption, retro analysis, and review traceability.

### Cross-artifact consistency check

**Decision:** After micro-task generation, scaffold runs a non-destructive consistency check: every spec success criterion must have at least one corresponding task, and every task must trace back to a spec requirement. Gaps are flagged; gold plating (tasks without spec backing) requires justification.

**Rationale:** Prevents spec-to-implementation drift from going undetected until code review. Catches omissions early when they're cheap to fix.

### Sonnet defaults: post-pipeline

**Decision:** Applied after pipeline is stable (Phase 7). A/B tested before rollout.

**Rationale:** Model assignments should reflect the final workflow. Testing on an unstable pipeline produces unreliable results.

## Success Criteria

- [ ] Complexity scoring rubric documented and applied in at least 1 bootstrap triage (#280)
- [ ] Baseline metrics recorded with defined measurement: session count per feature (manual log), lead interventions per scaffold (count of manual corrections during agent execution) (#280)
- [ ] Bootstrap produces specs with shapes, fit check, breadboard, and slices — validated on 1 real feature where output is reviewed for completeness (#281)
- [ ] Scaffold generates micro-tasks with verification commands — validated on 1 real feature where at least 80% of verification commands pass (#282)
- [ ] Shared task lists operational: agents claim and complete tasks from shared list in at least 1 real multi-agent scaffold session (#283)
- [ ] 7 skills have next-skills metadata + workflow guide published; at least 1 observed instance of an agent following a next-skill suggestion (#284)
- [ ] Smart splitting proposes sub-issues for a spec with &gt;5 criteria, and user can approve/skip (#285)
- [ ] Sonnet defaults applied; no quality regression observed over 3-5 sessions per changed agent (#286)
- [ ] Feature delivery speed: bootstrap-to-PR in fewer sessions vs baseline (measurable after Phase 1 captures baseline)
- [ ] Agent autonomy: fewer lead interventions per scaffold vs baseline (measurable after Phase 1 captures baseline)

**Minimum viable delivery:** Phases 1 + 2 + 3 (#280 + #281 + #282) represent the core value: richer specs + smarter scaffold planning. Everything else is valuable but deferrable. Note: Phase 3 depends on Phase 1's complexity rubric — if Phase 1 runs long, Phase 3 uses conservative estimates (all features scored as mid-range until rubric is available).

## Execution Timeline

| Week | Phase | Issues | Deliverables |
|------|-------|--------|-------------|
| **1** | 1 | #280 | Analysis: token hotspots + complexity rubric |
| **2-3** | 2 + 4 | #281 (start), #283 (start) | Bootstrap enrichment spec + shared task lists spec |
| **3-4** | 2 + 4 | #281 (implement), #283 (implement) | 2 PRs |
| **4** | 3 + 5 | #282 (start), #284 | Scaffold improvement spec + skill graph metadata |
| **5** | 3 | #282 (implement) | 1 PR: scaffold micro-tasks |
| **6** | 6 | #285 | 1 PR: smart splitting gate |
| **7+** | 7 | #286 | 1 PR: Sonnet defaults |

## Open Questions

- **Token billing granularity:** Will Claude billing data provide per-session/per-agent breakdowns, or will Phase 1 rely on estimation (tool call counts x average tokens)? Determines rubric precision.
- **`CLAUDE_CODE_TASK_LIST_ID` stability:** This is an experimental API. If it changes, Phase 4 falls back to enhanced TeamCreate + SendMessage. Monitor Claude Code changelogs.
- **`permissionMode` values for agents (#283):** Exact values (e.g., `bypassPermissions`, `default`) to be determined during #283 spec phase based on agent risk profiles.
- **Gate 2.5 threshold calibration:** Initial thresholds (&gt;5 criteria, &gt;3 slices) are estimates. Real calibration requires 3+ bootstrap runs with Phase 2 templates.
- **Phase 7 per-task model switching:** If A/B testing shows Sonnet works for routine tasks but not complex ones within the same agent role, per-invocation model selection may be needed instead of per-agent defaults. Deferred to #286 spec.
