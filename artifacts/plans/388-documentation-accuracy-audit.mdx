---
title: "Plan: docs: documentation accuracy audit — fix outdated and missing content"
issue: 388
spec: artifacts/specs/388-documentation-accuracy-audit.mdx
complexity: 4/10
tier: F-lite
generated: "2026-02-26T00:00:00Z"
---

## Summary

Fix 55 specific documentation inaccuracies across 26 files, grouped into 4 independent slices that can be executed in parallel. No code changes — all fixes are `.mdx`, `.md`, or `CLAUDE.md` edits.

## Agents

| Agent | Slice | Task count | Files |
|-------|-------|-----------|-------|
| doc-writer-1 | V1 Backend | 7 | docs/standards/backend-patterns.mdx, docs/architecture/auth-security.mdx, docs/architecture/rbac.mdx, docs/guides/rbac.mdx, docs/architecture/multi-tenant.mdx, docs/architecture/database.mdx, docs/architecture/ubiquitous-language.mdx |
| doc-writer-2 | V2 DevOps | 8 | docs/architecture/ci-cd.mdx, docs/hooks.mdx, docs/guides/i18n.mdx, docs/configuration.mdx, docs/guides/deployment.mdx, docs/getting-started.mdx, docs/contributing.mdx, docs/guides/security.mdx |
| doc-writer-3 | V3 Arch/Process | 6 | docs/guides/agent-teams.mdx, docs/architecture/index.mdx, docs/product/vision.mdx, docs/product/persona-gtm.mdx, AGENTS.md, docs/processes/dev-process.mdx |
| doc-writer-4 | V4 Frontend | 5 | docs/standards/frontend-patterns.mdx, docs/architecture/frontend.mdx, docs/guides/authentication.mdx, docs/guides/navigation-guards.mdx, apps/web/CLAUDE.md |

## Consistency Report

- Criteria covered: 55/55
- Uncovered criteria: none
- Tasks without spec backing: none
- Gold plating exemptions applied: 0

---

## Micro-Tasks

> All tasks are GREEN phase (docs-only — no RED/test phase). All tasks within a slice are `[P]` (no file overlap between tasks).

---

### Slice V1: Backend docs

#### Task V1-1: Fix database.mdx — SET LOCAL ROLE, checkCoreTables, migration table, DATABASE_APP_URL [P] → doc-writer-1

- **File:** `docs/architecture/database.mdx`
- **Snippet:**
  ```
  // In DrizzleProvider description:
  // Add note: DATABASE_APP_URL is preferred over DATABASE_URL (app user = RLS enforced;
  //   schema owner = RLS bypassed). SET LOCAL ROLE app_user must be called before
  //   set_config() in any transaction that enforces RLS.
  // In onModuleInit section:
  // Add: also calls checkCoreTables() to verify Better Auth core tables exist.
  // Fix migration table reference: drizzle.__drizzle_migrations (schema-qualified)
  ```
- **Verify:** `grep -q 'SET LOCAL ROLE' docs/architecture/database.mdx` (ready)
- **Expected:** exit 0
- **Time:** 5 min
- **Difficulty:** 2
- **Traces:** SC-BE-med-1, SC-BE-med-2, SC-BE-med-3
- **Phase:** GREEN

#### Task V1-2: Fix multi-tenant.mdx — SET LOCAL ROLE in prod section, mark org hierarchy Planned, fix migration filename, TenantInterceptor [P] → doc-writer-1

- **File:** `docs/architecture/multi-tenant.mdx`
- **Snippet:**
  ```
  // Production code section: add SET LOCAL ROLE app_user before set_config() call
  // "Organization Hierarchy and Tenant Boundaries" section: add callout:
  //   > **Planned / not yet implemented:** resolveParentOrg() currently returns orgId
  //   >   directly (no-op). Hierarchy is pending Phase 3.
  // Fix migration filename: 0000_rls_infrastructure.sql → 0000_baseline.sql (2 locations)
  // TenantInterceptor example: add note listing omitted behaviors (@SkipOrg() check,
  //   enforceDeletedOrgRestriction())
  ```
- **Verify:** `grep -q 'SET LOCAL ROLE' docs/architecture/multi-tenant.mdx` (ready)
- **Expected:** exit 0
- **Time:** 6 min
- **Difficulty:** 2
- **Traces:** SC-BE-high-2, SC-BE-high-9, SC-BE-med-9, SC-BE-med-10
- **Phase:** GREEN

#### Task V1-3: Fix auth-security.mdx — SET LOCAL ROLE, soft-delete check, @SkipOrg() decorator [P] → doc-writer-1

- **File:** `docs/architecture/auth-security.mdx`
- **Snippet:**
  ```
  // RLS enforcement description: mention SET LOCAL ROLE app_user requirement
  // AuthGuard.canActivate() flowchart: add soft-delete check step between
  //   session validation and role checks
  // Decorator table: add @SkipOrg() — "Skip tenant context resolution in
  //   TenantInterceptor; used for endpoints that do not require org context"
  ```
- **Verify:** `grep -q 'SET LOCAL ROLE' docs/architecture/auth-security.mdx` (ready)
- **Expected:** exit 0
- **Time:** 5 min
- **Difficulty:** 2
- **Traces:** SC-BE-high-3, SC-BE-high-5, SC-BE-med-4
- **Phase:** GREEN

#### Task V1-4: Fix backend-patterns.mdx — soft-delete guard evaluation order, AuthGuard constructor [P] → doc-writer-1

- **File:** `docs/standards/backend-patterns.mdx`
- **Snippet:**
  ```
  // AuthGuard evaluation order: insert soft-delete check between session validation
  //   and role checks. Note SOFT_DELETED_ALLOWED_ROUTES allowlist.
  // AuthGuard constructor example: include
  //   @Inject(forwardRef(() => UserService)) private readonly userService: UserService
  ```
- **Verify:** `grep -q 'SOFT_DELETED_ALLOWED_ROUTES' docs/standards/backend-patterns.mdx` (ready)
- **Expected:** exit 0
- **Time:** 5 min
- **Difficulty:** 2
- **Traces:** SC-BE-high-4, SC-BE-med-9b
- **Phase:** GREEN

#### Task V1-5: Fix docs/architecture/rbac.mdx — soft-delete, PATCH deprecated, @SkipOrg(), permission count 17 [P] → doc-writer-1

- **File:** `docs/architecture/rbac.mdx`
- **Snippet:**
  ```
  // Guard flowchart: add soft-delete step
  // PATCH /api/roles/members/:id/role: mark as deprecated, note replacement:
  //   PATCH /api/admin/members/:memberId
  // Decorator reference: add @SkipOrg() entry
  // Permission count: update all occurrences to 17 (api_keys:delete not seeded)
  ```
- **Verify:** `grep -q '@SkipOrg' docs/architecture/rbac.mdx` (ready)
- **Expected:** exit 0
- **Time:** 5 min
- **Difficulty:** 2
- **Traces:** SC-BE-high-6, SC-BE-high-7, SC-BE-med-5, SC-BE-med-6
- **Phase:** GREEN

#### Task V1-6: Fix docs/guides/rbac.mdx — member role endpoint, permission count 17 [P] → doc-writer-1

- **File:** `docs/guides/rbac.mdx`
- **Snippet:**
  ```
  // "Changing a Member's Role" section: update to use PATCH /api/admin/members/:memberId
  //   (or add deprecation notice pointing to replacement)
  // Permission count: update to 17
  ```
- **Verify:** `grep -q 'admin/members' docs/guides/rbac.mdx` (ready)
- **Expected:** exit 0
- **Time:** 3 min
- **Difficulty:** 1
- **Traces:** SC-BE-high-8, SC-BE-med-7
- **Phase:** GREEN

#### Task V1-7: Fix ubiquitous-language.mdx — permission count 17 [P] → doc-writer-1

- **File:** `docs/architecture/ubiquitous-language.mdx`
- **Snippet:**
  ```
  // Permission count: update to 17 (api_keys:delete is not seeded)
  ```
- **Verify:** `grep -q '17' docs/architecture/ubiquitous-language.mdx` (ready)
- **Expected:** exit 0
- **Time:** 2 min
- **Difficulty:** 1
- **Traces:** SC-BE-med-8
- **Phase:** GREEN

---

### Slice V2: DevOps docs

#### Task V2-1: Fix configuration.mdx — DATABASE_APP_URL, TurboRepo task listing [P] → doc-writer-2

- **File:** `docs/configuration.mdx`
- **Snippet:**
  ```
  // Database section: add DATABASE_APP_URL with description (app user, RLS enforced)
  // Vercel API table: add DATABASE_APP_URL row
  // TurboRepo task listing: add clean and license:check entries
  ```
- **Verify:** `grep -q 'DATABASE_APP_URL' docs/configuration.mdx` (ready)
- **Expected:** exit 0
- **Time:** 4 min
- **Difficulty:** 2
- **Traces:** SC-cross-1, SC-devops-med-4
- **Phase:** GREEN

#### Task V2-2: Fix deployment.mdx — DATABASE_APP_URL in API provisioning [P] → doc-writer-2

- **File:** `docs/guides/deployment.mdx`
- **Snippet:**
  ```
  // API project provisioning section: add DATABASE_APP_URL to the required env vars list
  ```
- **Verify:** `grep -q 'DATABASE_APP_URL' docs/guides/deployment.mdx` (ready)
- **Expected:** exit 0
- **Time:** 3 min
- **Difficulty:** 1
- **Traces:** SC-cross-2
- **Phase:** GREEN

#### Task V2-3: Fix getting-started.mdx — DATABASE_APP_URL, test:coverage command [P] → doc-writer-2

- **File:** `docs/getting-started.mdx`
- **Snippet:**
  ```
  // Database setup step: add DATABASE_APP_URL to env var setup instructions
  // Fix test command: bun run test:coverage (not bun test:coverage)
  ```
- **Verify:** `grep -q 'DATABASE_APP_URL' docs/getting-started.mdx` (ready)
- **Expected:** exit 0
- **Time:** 3 min
- **Difficulty:** 1
- **Traces:** SC-cross-3, SC-devops-med-5
- **Phase:** GREEN

#### Task V2-4: Fix docs/architecture/ci-cd.mdx — workflow count 5, E2E matrix, cache@v5, ci-success, env:check [P] → doc-writer-2

- **File:** `docs/architecture/ci-cd.mdx`
- **Snippet:**
  ```
  // Workflow count: "two" → "five"
  // Workflow table: add pr-title.yml, auto-merge.yml, neon-cleanup.yml with descriptions
  // E2E section: document 2-shard matrix strategy (chromium+firefox+webkit),
  //   e2e-matrix job, merge-reports aggregator job
  // YAML snippet: actions/cache@v4 → actions/cache@v5
  // ci-success aggregator job: document as single required status check
  // Lint job: add env:check step to description
  ```
- **Verify:** `grep -q 'neon-cleanup' docs/architecture/ci-cd.mdx` (ready)
- **Expected:** exit 0
- **Time:** 8 min
- **Difficulty:** 3
- **Traces:** SC-devops-high-1, SC-devops-high-2, SC-devops-med-1, SC-devops-med-2, SC-devops-med-3
- **Phase:** GREEN

#### Task V2-5: Fix docs/guides/i18n.mdx — Paraglide strategy order [P] → doc-writer-2

- **File:** `docs/guides/i18n.mdx`
- **Snippet:**
  ```
  // Paraglide strategy: update array to ['cookie', 'preferredLanguage', 'url', 'baseLocale']
  ```
- **Verify:** `grep -q "preferredLanguage" docs/guides/i18n.mdx` (ready)
- **Expected:** exit 0
- **Time:** 2 min
- **Difficulty:** 1
- **Traces:** SC-devops-high-3
- **Phase:** GREEN

#### Task V2-6: Fix docs/hooks.mdx — simplified Biome snippets, bun test blocker section [P] → doc-writer-2

- **File:** `docs/hooks.mdx`
- **Snippet:**
  ```
  // Biome hook JSON: show simplified readable version with note that actual
  //   settings.json adds case file-type guard, timeout 10s, 2>/dev/null || true
  // Add new subsection: ### Bun Test Blocker
  //   Document the PreToolUse hook that blocks bun test (use bun run test instead)
  //   Alongside existing ### Biome Auto-Format and ### Security Check
  ```
- **Verify:** `grep -q 'Bun Test Blocker' docs/hooks.mdx` (ready)
- **Expected:** exit 0
- **Time:** 5 min
- **Difficulty:** 2
- **Traces:** SC-devops-med-4, SC-devops-med-5
- **Phase:** GREEN

#### Task V2-7: Fix contributing.mdx — commit types build and revert [P] → doc-writer-2

- **File:** `docs/contributing.mdx`
- **Snippet:**
  ```
  // Commit types table: add build and revert entries with descriptions
  ```
- **Verify:** `grep -q 'revert' docs/contributing.mdx` (ready)
- **Expected:** exit 0
- **Time:** 2 min
- **Difficulty:** 1
- **Traces:** SC-devops-med-6
- **Phase:** GREEN

#### Task V2-8: Fix docs/guides/security.mdx — Gitleaks scanning gate clarification [P] → doc-writer-2

- **File:** `docs/guides/security.mdx`
- **Snippet:**
  ```
  // Gitleaks note: clarify that scanning is gated by detect-changes on PRs
  //   (not "every PR" unconditionally)
  ```
- **Verify:** `grep -q 'detect-changes' docs/guides/security.mdx` (ready)
- **Expected:** exit 0
- **Time:** 2 min
- **Difficulty:** 1
- **Traces:** SC-devops-med-7
- **Phase:** GREEN

---

### Slice V3: Architecture & process docs

#### Task V3-1: Fix vision.mdx — agent count 9, packages tree, mark Planned sections [P] → doc-writer-3

- **File:** `docs/product/vision.mdx`
- **Snippet:**
  ```
  // Lines 92 and 259: agent count "10" → "9"
  // Packages tree: add email, vitest-config, playwright-config
  // Runtime agents section: add > **Planned** callout
  // Marketplace skills section: add > **Planned** callout
  ```
- **Verify:** `grep -c '10 agent' docs/product/vision.mdx` (ready — expect 0)
- **Expected:** 0
- **Time:** 4 min
- **Difficulty:** 2
- **Traces:** SC-cross-4, SC-arch-med-2, SC-arch-med-3
- **Phase:** GREEN

#### Task V3-2: Fix persona-gtm.mdx — agent count 9 [P] → doc-writer-3

- **File:** `docs/product/persona-gtm.mdx`
- **Snippet:**
  ```
  // Agent count: update to 9 (same correction as vision.mdx)
  ```
- **Verify:** `grep -q '9 agent' docs/product/persona-gtm.mdx` (ready)
- **Expected:** exit 0
- **Time:** 2 min
- **Difficulty:** 1
- **Traces:** SC-cross-5
- **Phase:** GREEN

#### Task V3-3: Fix docs/guides/agent-teams.mdx — model tiering, Mermaid diagram, plugins list [P] → doc-writer-3

- **File:** `docs/guides/agent-teams.mdx`
- **Snippet:**
  ```
  // Model Tiering section: update to state 6 agents explicitly set model: sonnet
  //   (backend-dev, devops, doc-writer, fixer, frontend-dev, tester)
  //   and 3 inherit (architect, product-lead, security-auditor)
  //   Remove or correct "not applied yet" claim
  // Mermaid diagram: fix dangling reference FFScaffold → FFAgents
  // Plugins section: list all 11 enabled plugins from .claude/settings.json
  //   (or note they are omitted with link to settings.json)
  ```
- **Verify:** `grep -q 'FFAgents' docs/guides/agent-teams.mdx` (ready)
- **Expected:** exit 0
- **Time:** 6 min
- **Difficulty:** 3
- **Traces:** SC-arch-high-1, SC-arch-high-2, SC-arch-high-3
- **Phase:** GREEN

#### Task V3-4: Fix docs/architecture/index.mdx — packages tree, artifacts tree, .claude tree [P] → doc-writer-3

- **File:** `docs/architecture/index.mdx`
- **Snippet:**
  ```
  // Packages tree: add email, vitest-config, playwright-config
  // Artifacts tree: add frames/ directory
  // .claude tree: add agent-memory/ directory
  ```
- **Verify:** `grep -q 'vitest-config' docs/architecture/index.mdx` (ready)
- **Expected:** exit 0
- **Time:** 3 min
- **Difficulty:** 1
- **Traces:** SC-arch-med-1
- **Phase:** GREEN

#### Task V3-5: Fix AGENTS.md — maxTurns range 30-50 [P] → doc-writer-3

- **File:** `AGENTS.md`
- **Snippet:**
  ```
  // maxTurns range: correct to "30–50"
  //   (verify against .claude/agents/*.md frontmatter actual values: 30 and 50)
  ```
- **Verify:** `grep -q '30' AGENTS.md` (ready)
- **Expected:** exit 0
- **Time:** 2 min
- **Difficulty:** 1
- **Traces:** SC-arch-med-4
- **Phase:** GREEN

#### Task V3-6: Fix docs/processes/dev-process.mdx — numbering gap at step 10 [P] → doc-writer-3

- **File:** `docs/processes/dev-process.mdx`
- **Snippet:**
  ```
  // Tier F steps section: find and fix the numbering gap (step 10 is missing)
  ```
- **Verify:** `grep -q '10\.' docs/processes/dev-process.mdx` (ready)
- **Expected:** exit 0
- **Time:** 2 min
- **Difficulty:** 1
- **Traces:** SC-arch-med-5
- **Phase:** GREEN

---

### Slice V4: Frontend docs

#### Task V4-1: Fix frontend-patterns.mdx §1.7 — queryOptions as Target Pattern, remove non-existent files, add migration debt note [P] → doc-writer-4

- **File:** `docs/standards/frontend-patterns.mdx`
- **Snippet:**
  ```
  // §1.7 heading/intro: frame queryOptions factory as "Target Pattern"
  //   (required standard, migration in progress)
  // Show inline useQuery + standalone constant as "Current Pattern"
  // Summary table: update prescriptive "Always: wrap in queryOptions() factory"
  //   → "Target: wrap in queryOptions() factory"
  // Remove non-existent file examples:
  //   apps/web/src/lib/featureFlags/queries.ts
  //   apps/web/src/lib/featureFlags/queryKeys.ts
  // Update examples to reflect actual inline useQuery pattern in feature-flags.tsx
  // Add note: feature-flags.tsx has known migration debt (direct fetch in event handler,
  //   inline useQuery — pre-migration state, pending useMutation + queryOptions migration)
  ```
- **Verify:** `grep -q 'Target Pattern' docs/standards/frontend-patterns.mdx` (ready)
- **Expected:** exit 0
- **Time:** 8 min
- **Difficulty:** 3
- **Traces:** SC-fe-high-1, SC-fe-high-2, SC-fe-med-3
- **Phase:** GREEN

#### Task V4-2: Fix docs/architecture/frontend.mdx — remove demo refs, fix devtools count, DocsErrorBoundary casing [P] → doc-writer-4

- **File:** `docs/architecture/frontend.mdx`
- **Snippet:**
  ```
  // Remove demo references: demo.FormComponents.tsx, demo-store.ts, src/data/ section,
  //   TanStack Store section (files no longer exist)
  // Devtools section: update to 2 plugins (remove TanStack Store Devtools entry)
  // DocsErrorBoundary.tsx casing: was docs-error-boundary.tsx → DocsErrorBoundary.tsx
  ```
- **Verify:** `grep -qv 'demo-store' docs/architecture/frontend.mdx` (ready)
- **Expected:** exit 0
- **Time:** 5 min
- **Difficulty:** 2
- **Traces:** SC-fe-high-3, SC-fe-high-4, SC-fe-med-1
- **Phase:** GREEN

#### Task V4-3: Fix docs/guides/authentication.mdx — import alias [P] → doc-writer-4

- **File:** `docs/guides/authentication.mdx`
- **Snippet:**
  ```
  // Import alias: ~/lib/authClient → @/lib/authClient (all occurrences)
  ```
- **Verify:** `grep -q '@/lib/authClient' docs/guides/authentication.mdx` (ready)
- **Expected:** exit 0
- **Time:** 2 min
- **Difficulty:** 1
- **Traces:** SC-fe-high-5
- **Phase:** GREEN

#### Task V4-4: Fix docs/guides/navigation-guards.mdx — missing public routes [P] → doc-writer-4

- **File:** `docs/guides/navigation-guards.mdx`
- **Snippet:**
  ```
  // Public pages table: add /magic-link/verify, /magic-link-sent, /talks/dev-process
  ```
- **Verify:** `grep -q 'magic-link/verify' docs/guides/navigation-guards.mdx` (ready)
- **Expected:** exit 0
- **Time:** 2 min
- **Difficulty:** 1
- **Traces:** SC-fe-med-2
- **Phase:** GREEN

#### Task V4-5: Fix apps/web/CLAUDE.md — messages path, admin/ component directory [P] → doc-writer-4

- **File:** `apps/web/CLAUDE.md`
- **Snippet:**
  ```
  // Messages path: project.inlang/messages/ → apps/web/messages/
  // Component directory listing: add admin/ entry
  ```
- **Verify:** `grep -q 'apps/web/messages' apps/web/CLAUDE.md` (ready)
- **Expected:** exit 0
- **Time:** 2 min
- **Difficulty:** 1
- **Traces:** SC-fe-med-4, SC-fe-med-5
- **Phase:** GREEN
