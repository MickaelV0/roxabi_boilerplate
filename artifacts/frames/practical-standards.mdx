---
title: 'Phase 1: Practical Standards (TanStack + Testing + SOLID)'
issue: 316
status: approved
tier: F-full
date: 2026-02-26
---

## Problem

The Roxabi boilerplate codebase has a solid technical foundation but lacks authoritative documentation for three key areas: TanStack Query patterns, testing strategy, and SOLID principles. A codebase audit ([analyses/256-architecture-standards.mdx](../analyses/256-architecture-standards.mdx)) identified these gaps:

- **TanStack Query (#260)** — Largest gap, highest ROI. No `queryOptions()` factories, no route-level prefetching, hardcoded inline query keys, undocumented state separation. AI agents generating code have no reference patterns to follow.
- **Testing (#261)** — The testing pyramid and behavior-driven approach are practiced but undocumented. MSW is absent (raw `vi.fn()` fetch mocking only). No formal adoption plan.
- **SOLID (#258)** — NestJS DI provides strong DIP/SRP, but principles are implicit. Frontend SOLID patterns are undocumented. Weak OCP (one filter per exception type, not composable).

Without documentation, AI agents produce inconsistent code, new developers guess at patterns, and code reviewers lack authoritative references.

## Who

- **Primary:** AI agents (Claude Code) — consume standards docs to generate code that follows the patterns
- **Secondary:** New developers onboarding to the boilerplate — need to understand intended architecture without reverse-engineering
- **Secondary:** Code reviewers — need authoritative references to cite in reviews

## Constraints

- **Docs only** — no code refactoring, no config changes, no CI modifications
- **Extend existing docs** — build on `frontend-patterns.mdx`, `backend-patterns.mdx`, and `testing.mdx` rather than creating disconnected new files where possible
- **Actionable patterns** — every section must include concrete code examples agents can follow, not abstract principles
- **Three sub-issues** — #260 (TanStack), #261 (Testing), #258 (SOLID) as defined in the parent issue

## Out of Scope

- Code refactoring to match documented patterns (separate implementation issues)
- DDD and Hexagonal Architecture documentation (Phase 2 — issues #257 + #310)
- Turborepo (#259) and Biome (#262) documentation (already well-configured, deferred to quick checklists)
- New CI/CD checks or automated enforcement of standards
- Migration of existing code to use `queryOptions()`, MSW, or new patterns

## Complexity

**Tier: F-full** — Three distinct topic areas (#260, #261, #258), each requiring analysis of current codebase patterns, identification of gaps, and production of standards documentation with code examples. The breadth across frontend query patterns, testing infrastructure, and cross-cutting SOLID principles warrants full framing, analysis, and spec phases.

Signals:
- 3 sub-issues spanning frontend, testing, and cross-cutting concerns
- Each area requires reading existing code to document correct patterns
- Existing analysis artifact provides strategic context but not implementation-level detail
- Multiple existing docs to extend (`frontend-patterns.mdx`, `backend-patterns.mdx`, `testing.mdx`)
