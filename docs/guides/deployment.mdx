---
title: Deployment
description: Deploy Roxabi with Vercel (web) and Render (API) â€” free tier
---

## Overview

Roxabi uses a push-to-deploy architecture with two managed platforms.

```
Push to main
  -> GitHub Actions CI (lint, typecheck, test)
  -> Vercel auto-deploys web app
  -> Render auto-deploys API
```

| Component | Platform | Details |
|-----------|----------|---------|
| Web (TanStack Start + Nitro) | Vercel (free) | SSR, edge caching, no cold starts |
| API (NestJS + Fastify) | Render (free tier) | Node.js runtime, cold starts after 15 min idle |
| Database | OVH CloudDB | External PostgreSQL, not managed by either platform |

No Docker is needed for deployment. Docker configurations (Dockerfiles, `docker-compose.prod.yml`, Nginx configs, `deploy/`) remain in the repo for local development only.

---

## Vercel Setup (Web)

### 1. Connect Your Repository

1. Sign up at [vercel.com](https://vercel.com) and connect your GitHub account
2. Click **Add New Project** and import the repository (`MickaelV0/roxabi_boilerplate`)

### 2. Configure Build Settings

| Setting | Value |
|---------|-------|
| Root Directory | `apps/web` |
| Framework Preset | Auto-detected (TanStack Start / Nitro) |
| Build Command | `cd ../.. && bun install && cd apps/web && bun run build` |
| Output Directory | `.output` |
| Install Command | Leave empty (handled in build command) |

### 3. Add Environment Variables

In the Vercel dashboard, go to **Settings &gt; Environment Variables** and add:

| Variable | Value | Example |
|----------|-------|---------|
| `API_URL` | Render API URL | `https://roxabi-api.onrender.com` |
| `APP_URL` | Vercel URL | `https://roxabi.vercel.app` |

### 4. Deploy

Click **Deploy**. Vercel will build and deploy your web app. After this initial deploy, every push to `main` triggers an automatic redeployment.

---

## Render Setup (API)

### 1. Connect Your Repository

1. Sign up at [render.com](https://render.com) and connect your GitHub account
2. Choose one of the following approaches:

**Option A -- Blueprint (recommended):** Click **New &gt; Blueprint**, select the repository. Render auto-detects `render.yaml` and provisions the service.

**Option B -- Manual Web Service:** Click **New &gt; Web Service**, select the repository, and configure manually (see step 2).

### 2. Configure Build Settings (Manual Only)

| Setting | Value |
|---------|-------|
| Root Directory | `apps/api` |
| Build Command | `cd ../.. && bun install --frozen-lockfile && cd apps/api && bunx nest build` |
| Start Command | `node dist/main.js` |
| Health Check Path | `/health` |

### 3. Add Environment Variables

In the Render dashboard, go to **Environment** and add:

| Variable | Value |
|----------|-------|
| `DATABASE_URL` | OVH CloudDB connection string |
| `CORS_ORIGIN` | Vercel web URL (e.g., `https://roxabi.vercel.app`) |
| `BETTER_AUTH_SECRET` | Random 32+ character string |
| `BETTER_AUTH_URL` | Render API URL (e.g., `https://roxabi-api.onrender.com`) |
| `EMAIL_FROM` | Sender email address |
| `APP_URL` | Vercel web URL |
| `API_URL` | Render API URL |

Generate `BETTER_AUTH_SECRET` with:

```bash
openssl rand -base64 32
```

### 4. Important Notes

- Render automatically sets `PORT` (default `10000`) and `NODE_ENV=production`. You do not need to configure these.
- The free tier sleeps after 15 minutes of inactivity. The first request after sleep takes approximately 10--15 seconds while the service spins back up.

---

## Custom Domains (Optional)

Both platforms handle SSL certificates automatically.

| Platform | Steps |
|----------|-------|
| Vercel | **Settings &gt; Domains** &gt; add `app.&lt;domain&gt;` |
| Render | **Settings &gt; Custom Domains** &gt; add `api.&lt;domain&gt;` |

Configure DNS records to point each subdomain to the respective platform. Vercel provides a CNAME target; Render provides a CNAME or A record.

---

## Rollback

### Vercel (Web)

1. Go to the **Deployments** tab in your Vercel project
2. Find the previous working deployment
3. Click the three-dot menu and select **Promote to Production**

### Render (API)

1. Go to the **Events** tab in your Render service
2. Click **Manual Deploy**
3. Select a previous commit to deploy

---

## VPS Alternative

The repository includes Docker configurations for VPS-based deployment:

- Multi-stage Dockerfiles for API and web
- `docker-compose.prod.yml` for container orchestration
- Nginx reverse proxy configs in `deploy/nginx/`
- GitHub Actions CD workflow for automated SSH deploy

If you have a VPS with Docker, you can use the Docker build/push/SSH deploy pipeline instead of Vercel and Render. See the full specification at [docs/specs/52-vps-deployment.mdx](/docs/specs/52-vps-deployment).
