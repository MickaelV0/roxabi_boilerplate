---
title: Database Architecture
description: Drizzle ORM setup, schema conventions, migration workflow, and patterns used in the API.
---

# Database Architecture

## Overview

<!-- TODO: Describe Drizzle ORM with PostgreSQL via postgres.js driver. Mention strict TypeScript integration. -->

## Provider Pattern

<!-- TODO: Document DRIZZLE and POSTGRES_CLIENT Symbol injection tokens, nullable in dev / throw in prod, global DatabaseModule, connection pooling config (max: 10, idle_timeout: 20, connect_timeout: 10). -->

## Schema Conventions

<!-- TODO: Document shared `timestamps` helper (created_at, updated_at with timezone + $onUpdateFn), `tenantColumn` helper for RLS, text primary keys with UUID generation, snake_case column names, plural table names. -->

## Auth Schema

<!-- TODO: Document Better Auth managed tables: users, sessions, accounts, verifications, organizations, members, invitations. Defined in auth.schema.ts via Drizzle adapter (usePlural: true). -->

## Drizzle Kit Configuration

<!-- TODO: Document drizzle.config.ts: schema at ./src/database/schema/index.ts, migrations at ./drizzle/migrations, strict: true, verbose: true. -->

## Migration Workflow

<!-- TODO: Document bunx drizzle-kit generate, bunx drizzle-kit migrate, bunx drizzle-kit studio. -->

## Adding a New Table

<!-- TODO: Step-by-step: create schema file, re-export from index.ts, generate migration, apply migration. -->
