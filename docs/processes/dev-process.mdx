---
title: Development Process
description: Development workflow with two tiers adapted to task complexity
---

# Development Process

Adapts to task complexity through two tiers. **Determine tier before starting.**

## Step 0: Determine Tier

```
≤3 files, no arch risk, no regression risk? ────────► Tier S
Otherwise ──────────────────────────────────────────► Tier F
```

| Tier | Name | Criteria | Process |
|------|------|----------|---------|
| **F** | Feature | >3 files, or arch/regression risk | Bootstrap (if needed) + worktree + agents + /review |
| **S** | Quick Fix | ≤3 files, no arch, no risk | Worktree + PR |

> **Branch Strategy:** `staging` is the default integration branch. All feature and fix branches are created from `staging` and PRs target `staging`. Only `hotfix/*` branches may target `main` directly. Merges to `main` trigger production deploys; merges to `staging` do not auto-deploy (use the **Deploy Preview** GitHub Action for on-demand previews).

---

## Development Checklist

**CRITICAL: Before considering a development complete, verify ALL applicable items.**

### 1. Source Code

| Artifact | When | Typical files |
|----------|------|---------------|
| Frontend components | UI changes | `apps/web/src/**/*.tsx` |
| Backend modules | API changes | `apps/api/src/**/*.ts` |
| Shared UI | Reusable components | `packages/ui/src/**/*.tsx` |
| Shared types | Type definitions | `packages/types/src/**/*.ts` |

### 2. Tests

| Type | When | Typical files |
|------|------|---------------|
| Unit tests | New function/logic | `**/*.test.ts`, `**/*.spec.ts` |
| E2E tests | User flows | `apps/web/e2e/**/*.spec.ts` |
| API tests | Endpoints | `apps/api/src/**/*.spec.ts` |

**Rule: Any new public function must have at least one test.**

### 3. Documentation

| Artifact | When | Files |
|----------|------|-------|
| Feature spec | New feature | `docs/specs/*.mdx` |
| Analysis (pre-spec) | Before writing a spec | `docs/analyses/*.mdx` |
| Architecture | Structure change | `docs/architecture/*.mdx` |
| CLAUDE.md | Critical change | `CLAUDE.md` |

### 4. Configuration

| Artifact | When | Files |
|----------|------|-------|
| Environment variables | New config | `.env.example` |
| Package dependencies | New packages | `package.json`, `bun.lock` |
| TypeScript config | Compiler settings | `tsconfig.json` |

---

## Tier S: Quick Fix

### S.1 — Scope
- Identify files (max 3)
- Confirm no regression risk
- **List all impacted artifacts** (see checklist above)

> **XS exception:** For Size XS changes (single file, &lt;1h, zero risk), use `AskUserQuestion` to confirm with the lead. If approved, direct branch from staging is acceptable without worktree.

### S.2 — Create Worktree

```bash
git worktree add ../roxabi-XXX -b fix/XXX-description staging
cd ../roxabi-XXX
```

### S.3 — Validate
- Present approach with `AskUserQuestion`
- Include: files to modify, related artifacts (tests, docs)
- Wait for explicit approval

### S.4 — Implement
Follow this order:

1. **Read** existing files before modifying
2. **Implement** business logic
3. **Update tests**
4. **Run quality checks**: `bun lint && bun typecheck && bun test`
5. **Verify** all checks pass
6. *(Optional)* Delegate to **tester** subagent for a quick quality check

### S.5 — Verify & PR

Before creating the PR, verify **all applicable items** from the [Quality Checklist](#quality-checklist):
- All impacted artifacts are included (code, tests, docs, config)
- `bun lint && bun typecheck && bun test` pass locally
- No debug code or console.log left behind

```bash
# 1. Check changes — verify nothing is missing
git status
git diff --stat

# 2. Add files (NEVER git add -A)
git add <file1> <file2> ...

# 3. Commit with standard format
git commit -m "$(cat <<'EOF'
<type>(<scope>): <description>

<optional body>

Co-Authored-By: Claude <model> <noreply@anthropic.com>
EOF
)"

# 4. Create PR
gh pr create --title "<type>: description" --body "Closes #XXX"
```

### S.6 — Wait for CI

**MANDATORY:** Wait for all CI checks to pass before merging.

```bash
# Watch CI status until completion
gh pr checks <pr-number> --watch
```

CI runs: **lint → typecheck → test → build** (+ E2E if relevant paths changed).

If CI fails: fix the issue, push a new commit, and wait for CI again. **Never merge with failing checks.**

### S.7 — Cleanup Worktree (after merge)

```bash
# Return to main project directory
cd ../roxabi_boilerplate
git worktree remove ../roxabi-XXX
```

**Commit types:** `feat`, `fix`, `refactor`, `docs`, `style`, `test`, `chore`

---

## Agent Coordination

Two modes are available depending on task complexity. See the [Agent Teams Guide](/docs/guides/agent-teams) for full setup and playbooks.

| Mode | Mechanism | When | Overhead |
|------|-----------|------|----------|
| **Subagents** | `Task` tool (single session) | Tier S or Tier F single-domain | Low — results return to your context |
| **Agent Teams** | `TeamCreate` (multi-process swarm) | Tier F multi-domain or large scope | High — each agent is a separate Claude instance |

**Quick decision:**
- Tier S: single session, optionally delegate to **tester** subagent
- Tier F single-domain: subagents via `Task` tool
- Tier F multi-domain: agent teams via `TeamCreate`

---

## Tier F: Feature

### F.1 — Scope
- Identify all impacted files and artifacts
- Determine if bootstrap is needed:

| Condition | Bootstrap |
|-----------|-----------|
| New feature, system-wide change, or >10 files | **Required** — run `/bootstrap` |
| Local scope, 3-10 files, clear requirements | **Optional** — skip to F.3 |

### F.2 — Bootstrap (if needed)

Run `/bootstrap` to spawn planning agents:
- `product-lead` — requirements gathering, acceptance criteria, issue triage
- `architect` — system design, architecture decisions, task breakdown
- `doc-writer` — spec and analysis drafting

Outputs:
- Specification in `docs/specs/XXX-slug.mdx`
- Architecture decisions documented
- Spec approval before coding

### F.3 — Create Worktree & Spawn Agents

```bash
git worktree add ../roxabi-XXX -b feat/XXX-slug staging
cd ../roxabi-XXX
```

Spawn agents based on domain (subagents or agent teams):
- Frontend only → `frontend-dev` + `tester`
- Backend only → `backend-dev` + `tester`
- Full-stack → `frontend-dev` + `backend-dev` + `tester`
- Large scope → + `architect` + `doc-writer`
- Security-sensitive → + `security-auditor`

> **Note:** `reviewer` is not pre-spawned — it is invoked on-demand via `/review` after PR creation (step F.7).

### F.4 — Validate Plan
- Present approach with `AskUserQuestion`
- Include: files to modify, architecture impact, tests, docs
- Wait for explicit approval

### F.5 — Implement
1. Read existing files before modifying
2. Implement in logical order (types → logic → UI)
3. Commit atomic changes as you go
4. Update/create tests
5. Update documentation if needed
6. Run quality checks: `bun lint && bun typecheck && bun test`

### F.6 — Verify & PR

**Self-review** all changes before creating the PR:
- `git diff staging...HEAD` — review every change
- Verify **all applicable items** from the [Quality Checklist](#quality-checklist)
- Confirm all impacted artifacts are included (code, tests, docs, config)
- Run full quality checks: `bun lint && bun typecheck && bun test`

```bash
git add <files>
git commit -m "$(cat <<'EOF'
feat(<scope>): description

Co-Authored-By: Claude <model> <noreply@anthropic.com>
EOF
)"

gh pr create --title "feat: description" --body "Closes #XXX"
```

### F.7 — Review → Fix → CI

Run `/review` on the PR to spawn the **reviewer** agent. The reviewer:

1. Reviews all changes against [code review standards](/docs/standards/code-review)
2. Fixes all blocking and warning findings
3. Commits and pushes the fixes
4. Waits for CI — `gh pr checks <pr-number> --watch`
5. If CI fails: fixes the failure, commits, pushes, and waits again
6. Once CI is green: notifies the **product-lead** that the PR is ready to merge

### F.8 — Merge

The **product-lead** merges the PR once the reviewer confirms CI is green.

```bash
gh pr merge <pr-number> --squash --delete-branch
```

**Never merge with failing checks.**

### F.9 — Cleanup Worktree (after merge)

```bash
# Return to main project directory
cd ../roxabi_boilerplate
git worktree remove ../roxabi-XXX
```

---

## Naming Conventions

| Type | Pattern | Example |
|------|---------|---------|
| Branch | `feat/XXX-slug` | `feat/123-user-auth` |
| Branch | `fix/XXX-slug` | `fix/456-login-bug` |
| Spec | `docs/specs/XXX-slug.mdx` | `docs/specs/123-user-auth.mdx` |
| Worktree | `../roxabi-XXX` | `../roxabi-123` |

> XXX = GitHub issue number

---

## Principles

1. **Validate before implementing** — Always get user approval on approach before writing code
2. **Match process to complexity** — Tier S for fixes, Tier F for features
3. **Understand before building** — Read code before modifying
4. **Complete the checklist** — Every applicable artifact must be updated
5. **Test new code** — New functions must have tests
6. **Track progress** — Keep GitHub issue updated
7. **Respect patterns** — Use shared packages, follow conventions
8. **No speculative complexity** — Build what's requested

---

## Quality Checklist

**Before creating PR:**
- [ ] All impacted artifacts included (code, tests, docs, config)
- [ ] Code follows conventions (Biome)
- [ ] Tests pass (`bun test`)
- [ ] Linting passes (`bun lint`)
- [ ] Types check (`bun typecheck`)
- [ ] No console.log or debug code
- [ ] PR description is clear
- [ ] Documentation updated if needed

**Before merging PR:**
- [ ] CI checks pass (`gh pr checks <pr-number> --watch`)
- [ ] `/review` feedback addressed (Tier F)
